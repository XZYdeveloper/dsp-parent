<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.GoodsMapper">
    <!--查询所有商品-->
    <resultMap id="GoodsMap" type="com.entity.Goods">
        <id property="goodsId" column="goods_id"></id>
        <result property="title" column="title"></result>
        <result property="price" column="price"></result>
        <result property="stock" column="stock"></result>
        <result property="sales" column="sales"></result>
        <result property="content" column="content"></result>
        <result property="cateId" column="cate_id"></result>
        <result property="timeCreate" column="time_create"></result>
    </resultMap>
    <select id="selectAllGoods" resultMap="GoodsMap">
        select *   from goods
    </select>

    <!--通过id查询商品-->
    <select id="selectGoodsById" resultMap="GoodsMap" parameterType="Long">
        select * from goods
        <where>
            goods_id=#{goodsId}
        </where>
    </select>

    <!--通过名称查询商品-->
    <select id="selectGoodsByTitle" resultMap="GoodsMap" parameterType="String">
        select * from goods
        <where>
            title like '%${value}%'
        </where>
    </select>

    <!-- 通过id修改商品属性值-->
    <update id="updateGoodsById" parameterType="com.entity.Goods">
        update goods set title=#{title},price=#{price},stock=#{stock},sales=#{sales},
         content=#{content},date_id=#{cateId},time_Create=#{timeCreate} where goods_id=#{goodsId}
    </update>
    <!--删除商品通过id-->
    <delete id="delGoodsById" parameterType="Long">
        delete from goods
        <where>
            goods_id=#{value}
        </where>
    </delete>

    <!--添加商品-->
    <insert id="insertGoods" parameterType="com.entity.Goods">
        insert into goods(goods_id,title,price,stock,content,cate_id) values
        (#{goodsId},#{title},#{price},#{stock},#{content},#{cateId})
    </insert>

    <!--查询所有商品图片-->
    <resultMap id="GoodsPicMap" type="com.entity.GoodsPic">
        <id property="picId" column="pic_id"></id>
        <result property="goodsId" column="goods_id"></result>
        <result property="pic" column="pic"></result>
        <result property="level" column="level"></result>
    </resultMap>
    <select id="queryAllPic" resultMap="GoodsPicMap">
        select * from goods_pic
    </select>

    <!--通过id查询商品图片-->
    <select id="queryPicByGoodsId" resultMap="GoodsPicMap" parameterType="Long">
        select * from goods_pic
        <where>
            goods_id=#{goodsId}
        </where>
    </select>

    <!--删除商品图片通过id-->
    <delete id="delGoodsPicById" parameterType="Long">
        delect from goods_pic
        <where>
            goods_id=#{goodsId}
        </where>
    </delete>
    <!-- 通过id修改商品图片-->
    <update id="" parameterType="Long">

    </update>
    <!--添加图片-->
    <!--<insert id="insertGoodsPic" parameterType="com.entity.GoodsPic">
        insert into goods_pic(pic_id,goods_id,pic,level) values
        (#{picId},#{goodsId},#{pic},#{level})
    </insert>-->
</mapper>